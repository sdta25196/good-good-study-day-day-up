# 插件

* 传统插件：浏览器插件、wps插件、客户端插件

遵循一定规范的应用程序接口编写的程序。

* 大模型插件：gpt插件、灵境

核心是web api, 独立于大模型、不受大模型约束、没有开发语言限制。

# 灵境

灵境是一个平台，用来制作文心一言的插件。

文心一言是一个智能中枢大脑，插件就是文心一言的耳、目、手。插件将文心一言的AI能力和外部应用相结合，丰富大模型的落地场景，同时利用大模型完成此前无法实现的任务。

## 插件分类

* 数据，提供给用户在使用时的数据集。
* 能力，提供给用户在使用时的能力。
* 应用，提供给用户一套完整的应用流程。


## 插件工作原理

插件的触发机制为：用户主动选择使用(@xxx) 和 百度触发模块调用。

* 开发者提交注册插件
* 百度处理用户query, 通过插件触发模块调用不同的插件
* 根据开发者api描述文件，判断调用哪个api
* 根据用户的query, 调用api
* 大模型润色后（是否润色可在配置文件中设置）反馈用户

例：

天气插件选择 -> 询问今天北京的天气 -> 大模型提取关键信息：时间 + 地点 -> 根据协议调用插件API -> 大模型对结果润色反馈用户

![插件调用流程](插件调用流程.jpg)

## 数据插件

创建并上传数据集即可制作插件

用户上传数据集，并设置数据规则时候，百度会通过对数据集进行向量化来使数据能够被模型理解，并应用于创建的数据插件中

> 向量化：使得我们可以使用代数和几何的计算方法来处理和分析数据

拥有优质数据又不想付出开发成本的话，数据插件是最优选择，且百度承诺数据集仅用来帮助开发者自动化的理解、提炼、总结、调用

> 例如：历史数据查询。

### 数据集创建

* pdf文件中不要使用扫描件，目前不能识别
* 分段的目的是将长文拆分成较小的段落，以便模型更好的处理与理解，对模型生成结果有帮助

> 段落重叠字符： 如果**上下文有关联**才设置这个字段否则可以为0，帮助模型理解

> 为保证完整性：虽然设置了最大段落字符数，也会在下一个或前一个分隔符结束。

### 未来规划

* 支持API
* 支持大数据集，目前只支持10M

## 能力插件

上传下述配置文件即可制作插件：

* 插件清单文件（ai-plugin.json，必选），该文件包含插件的基础信息（名称、头像等）、身份验证信息以及OpenAPI 规范等；
* 插件服务描述文件（openapi.yaml，必选），该文件用于模型识别您提供的功能服务；
* 示例描述文件（example.yaml，可选），可在此文件中提供插件示例，以提升插件调用的正确率；
* 动作消息注册文件（msg_content.yaml，可选），该文件用于在用户场景中展示插件调用进展；

### 配置文件注意事项

* `ai-plugin.json` 中 `description_for_model` 字段是对大模型描述插件的能力，要求尽量**简洁、直接、明确**
* `example.yaml` 中提供**三个示例，长度不超过三百个字符**，同时可提供反例：在不需要调用插件的情况下，不进行调用
* `msg_content.yarml` 用来定义异常、消息时的处理机制 - **可提升用户体验**
  * 生成工作进度
  * 处理服务异常
* `prompt` 和配置文件中 `description` 的区别：**prompt是动态的**

### 插件优化

* 清晰、明白、准确的描述插件功能和接口功能
* 添加example，覆盖最典型的示例, 并且添加反例
* 写明接口功能，尽量使用单一职责原则，降低误召率
* 使用 prompt，让大模型进行润色

## 备注

* 文心一言根据**插件的描述** 判断是否调起插件


## QA

单词本： 语音 + 插件 就可以实现智能单词本，添加、删除、检查。

----

Q: 传统SEO会被替换么？

A：百度官方目前没有替换的打算。当文心一言被应用在各大入口，大量SEO的有质量产出者，转向插件制作，文心一言可以将会拦截大量的流量。普通SEO的展现量将会严重下降，SEO的价值降低。

----

Q: 平台会把开发者的数据用于文心模型训练吗？

A: 不会，目前模型对数据的调用仅有“索引模式”，也就是不改变模型本身，模型会将开发者上传的数据进行总结提炼，然后给到 C 端用户。具体可参考平台文档：[平台服务协议 ](https://plugin.baidu.com/docs/operations/service_agreement/)运营规则第三项第7条。

> 7. 我们充分尊重和保障您专有的数据安全，我们不会使用开发者通过我们平台提交的数据来训练或改进我们的通用大模型，您提交的数据仅用于帮助您做自动化地理解、提炼、总结与调用。但我们允许开发者选择与我们共享数据来提升优化服务。

----

Q: 插件创建上限是多少个？

A: 50 个。

----



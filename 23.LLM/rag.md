# RAG实战记录


- 检索（Retrieve）：拿用户 query 调搜索引擎 API，拿到搜素结果；
- 增强（Augmented）：设置提示词，把检索结果作为挂载上下文；
- 生成（Generation）：大模型回答问题，标注引用来源；


## 主要问题

- 响应速度
- 准确度

下述方案主要解决准确度，在准确的的前提下，尽可能的保证想要速度（例如切换更小的模型、优化更好的workflow）


## 方案

1. 意图识别 Intent Detection

主要实现方案有两种：
 - 第一种是内置问题库，把常见问题缓存起来，再跟用户提问做相似度匹配，如果用户提问命中关键词库，就直接大模型回复
 - 第二种是设置提示词，让大模型判断意图，【对搜索意图进行分类】

第一种方案会有枚举无法穷尽的问题，第二种方案主要问题在于大模型的识别准确度不够高。

2. 问题改写 query rewrite

主要包括三个维度的改写：
  - 让提问有更精准 / 更专业的表达
  - 补全上下文，做指代消解
  - 名词提取

3. 多信息源聚合 Multi Source

为了增加AI回复的可信度，对用户提问进行多信息检索，然后交给AI回复

4. 结果重排 Reranking

  - 过滤与query不符的结果
  - 上下文长度限制，利用重排截取最有价值的结果

5. 读取内容并构建上下文内容池
  
上下文内容池（Context Pool） = 历史搜索结果（Search Results）+ 历史对话消息（Chat Messages）

每次搜索后追问，都带上这个 Context Pool 做意图识别 / 问题改写，拿到新的检索结果后更新这个 Context Pool，并带上最新的 Context Pool 内容作为上下文请求大模型回答。

需要保证 Context Pool 的内容有较高的信息密度，同时要控制 Context Pool 的内容长度，不要超过大模型的 context 极限。

6. 提示词工程

需要大量精力用在提示词上，参考提示词工程博客


**壁垒在于数据，而不是技术**



## RAG产品

制作RAG产品的时候，我们需要考虑下面这些：数据选择、聚合、过滤、检索、润色文本处理、文档排名、少样本生成、提示设计


## 2024RAG方案概览

1. **GraphReader【图解专家】**：通过将长文本构建成图并利用智能体探索，帮助 AI 处理长文本，克服迷路问题，提升信息获取效率。
2. **MM - RAG【多面手】**：介绍多模态机器学习发展及应用，能综合处理多种信息，在多领域提供智能服务，推动多模态 AI 发展。
3. **CRAG【自我校正】**：借助检索评估器和网络搜索改进检索文档质量，分解重组信息，增强生成文本准确性与可靠性。
4. **RAPTOR【分层归纳】**：采用递归方式构建文本树结构，在推理时整合不同层级信息，有效处理长文档检索与信息提取。
5. **T - RAG【私人顾问】**：结合 RAG 与微调 LLM，利用树结构组织信息，保护隐私同时解决数据与推理相关问题，提供本地化服务。
6. **RAT【思考者】**：生成初始思维链后，依据检索信息修订思维步骤，显著提升长时生成任务性能，增强推理逻辑性。
7. **RAFT【开卷高手】**：训练模型在特定领域准确引用相关文档回答问题，结合思维链提升推理能力，优化问答效果。
8. **Adaptive - RAG【因材施教】**：依查询复杂程度动态选检索策略，通过小模型分类器平衡不同检索增强方式，适应多样查询。
9. **HippoRAG【海马体】**：受人类记忆理论启发，协同多种技术实现知识整合，类似海马体功能，提升知识处理深度。
10. **RAE【智能编辑】**：先检索编辑事实，再利用模型优化，通过特殊检索和修剪策略提高编辑准确性，减少幻觉。
11. **RAGCache【仓储员】**：构建多级动态缓存系统，组织知识树并缓存，提出高效替换策略，优化 RAG 推理延迟。
12. **GraphRAG【社区摘要】**：分阶段构建图索引和社区摘要，依问题整合摘要生成答案，有效总结文本信息。
13. **R4【编排大师】**：学习文档排序增强大语言模型生成能力，含顺序调整和表示增强步骤，提升响应质量。
14. **IM - RAG【自言自语】**：整合信息检索与 LLM，通过学习内心独白支持多轮检索生成，强化学习优化过程。
15. **AntGroup - GraphRAG【百家之长】**：兼容多知识库索引底座，提供多样检索能力，解决问答问题，汇聚多种技术优势。
16. **Kotaemon【乐高】**：开源可定制 RAG UI，兼顾用户与开发者需求，方便构建文档问答系统，提高开发灵活性。
17. **FlashRAG【百宝箱】**：模块化工具包，实现多种 RAG 方法并整理数据集，助力研究人员开展 RAG 研究。
18. **GRAG【侦探】**：强调子图结构提升 RAG 处理图数据性能，降低幻觉，深入挖掘文本关联信息。
19. **Camel - GraphRAG【左右开弓】**：依托 Mistral 模型提取知识构建图谱，结合多种检索方式，全面精准搜索信息。
20. **G - RAG【串门神器】**：基于图神经网络重排 RAG 检索结果，结合连接和语义信息，优化文档排序。
21. **LLM - Graph - Builder【搬运工】**：利用 LLM 将非结构化数据转为 Neo4j 知识图谱，提取节点等信息，构建知识体系。
22. **MRAG【八爪鱼】**：利用多头注意力层激活获取多方面文档，提高复杂查询检索准确性，解决多文档检索难题。
23. **PlanRAG【战略家】**：定义决策问答任务，先规划再检索生成答案，助力解决复杂数据分析决策问题。
24. **FoRAG【作家】**：生成大纲并扩展构建答案，基于精细 RLHF 框架优化事实性，提升长文问答质量。
25. **Multi - Meta - RAG【元筛选器】**：用数据库过滤和元数据改进 RAG 文档筛选，精准定位多跳查询相关文档。
26. **RankRAG【全能选手】**：指令微调 LLM 兼具排名和生成功能，简化系统复杂性，提升上下文相关性判断。
27. **GraphRAG - Local - UI【改装师】**：基于 GraphRAG 适配本地模型，提供丰富交互界面，方便用户操作。
28. **ThinkRAG【小秘书】**：可部署于笔记本的检索增强系统，实现本地知识库智能问答，便捷实用。
29. **Nano - GraphRAG【轻装上阵】**：简化版 GraphRAG，保留核心功能，提高运行效率，适用于资源受限场景。
30. **RAGFlow - GraphRAG【导航员】**：借鉴 GraphRAG 改进问答流程，优化文档预处理，提升检索效率。
31. **Medical - Graph - RAG【数字医生】**：用图谱方法提升医学诊断准确性和透明度，解决医疗数据应用难题。
32. **HybridRAG【中医合方】**：结合知识图谱和向量检索，优势互补，提升金融文档信息提取问答效果。
33. **W - RAG【进化搜索】**：利用大模型排序创建弱标注数据训练检索器，提升开放域问答检索能力。
34. **RAGChecker【质检员】**：为 RAG 系统提供细粒度诊断报告，分析核心模块性能，指导优化方向。
35. **Meta - Knowledge - RAG【学者】**：创新工作流程，引入元知识概念，提升知识库理解和检索深度广度。
36. **CommunityKG - RAG【社群探索】**：结合知识图谱社区结构与 RAG 增强事实核查，提高检索准确性相关性。
37. **TC - RAG【记忆术士】**：引入图灵完备系统管理状态变量，高效准确检索知识，避免错误积累。
38. **RAGLAB【竞技场】**：模块化开源库，公平对比 RAG 算法，构建研究生态，推动算法评估创新。
39. **MemoRAG【过目不忘】**：基于超长记忆模型的 RAG 框架，全局理解数据库，增强证据检索与响应生成。
40. **OP - RAG【注意力管理】**：优化长上下文 RAG 机制，提高性能，帮助模型聚焦关键信息。
41. **AgentRE【智能抽取】**：整合模型能力应对复杂关系抽取挑战，提升关系抽取准确性和效率。
42. **iText2KG【建筑师】**：利用 LLM 增量构建知识图谱，无需复杂准备，灵活扩充知识网络。
43. **GraphInsight【图谱解读】**：提升 LLM 图形理解能力，采用关键策略整合知识库，应对复杂图任务。
44. **LA - RAG【方言通】**：基于 LLM 的 ASR 检索增强范例，利用语音数据和检索机制提高识别准确性。
45. **SFR - RAG【精简检索】**：指令微调小型模型，注重上下文生成与减少幻觉，可与外部工具交互检索信息。
46. **FlexRAG【压缩专家】**：压缩检索上下文嵌入优化 RAG 性能，灵活支持不同压缩比，节省成本。
47. **CoTKR【图谱翻译】**：交替生成推理路径和知识，优化知识改写，提升复杂知识图谱问答效果。
48. **Open - RAG【智囊团】**：用开源模型提升 RAG 推理能力，训练应对干扰项，处理复杂查询。
49. **TableRAG【Excel 专家】**：为表格理解设计的 RAG 框架，精准定位表格数据，提升编码和检索效率。
50. **LightRAG【蜘蛛侠】**：融入图结构的检索增强框架，双层检索结合向量和图，提高响应速度与相关性。
51. **AstuteRAG【明智判官】**：综合内部知识和检索结果确定答案，提高系统鲁棒性和可信度。
52. **TurboRAG【速记高手】**：预计算文档 KV 缓存优化 RAG 推理，减少计算开销，加快响应时间。
53. **StructRAG【收纳师】**：引入混合信息结构化机制，模仿人类思维提高 LLM 知识密集型推理表现。
54. **VisRAG【火眼金睛】**：基于视觉 - 语言模型的 RAG 流程，避免文本信息损失，提升多模态文档处理能力。
55. **AGENTiGraph【知识管家】**：自然语言交互知识管理平台，集成多功能，适应动态需求和数据变化。
56. **RuleRAG【循规蹈矩】**：基于规则引导的检索增强生成方法，提升规则遵循和答案生成能力。
57. **Class - RAG【法官】**：动态更新检索库实现内容审核分类，比传统微调更灵活有效。
58. **Self - RAG【反思者】**：通过检索和反思提升模型质量，利用反思标记控制推理行为。
59. **SimRAG【自学成才】**：自训练使 LLM 适应特定领域，问答与问题生成协同提升专业知识理解。
60. **ChunkRAG【摘抄达人】**：LLM 驱动块过滤增强 RAG 系统，减少幻觉，提高事实准确性。
61. **FastGraphRAG【雷达】**：应用 PageRank 算法快速定位知识图谱关键信息，提高 GraphRAG 检索效率。
62. **AutoRAG【调音师】**：自动识别优化 RAG 模块组合，类似 AutoML 实践，提升系统效率和扩展性。
63. **Plan×RAG【项目经理】**：扩充 RAG 范式为计划 - 检索，分解查询并行处理，利用冻结模型生成答案。
64. **SubgraphRAG【定位仪】**：检索子图并利用 LLM 推理预测，平衡模型复杂度和推理能力，实现高效检索。
65. **RuAG【炼金术士】**：蒸馏数据为逻辑规则注入 LLM，提升推理能力，促进知识与模型融合。
66. **RAGViz【透视眼】**：可视化检索文档和模型注意力，辅助诊断和理解 RAG 系统运行。
67. **AgenticRAG【智能助手】**：将 AI 智能体融入 RAG 流程，协调组件执行额外行动，克服局限。
68. **HtmlRAG【排版师】**：在 RAG 中用 HTML 建模知识，提出处理策略，优化知识呈现与利用。
69. **M3DocRAG【感官达人】**：多模态 RAG 框架适应多种文档场景，利用多模态检索器处理多文档和视觉信息。
70. **KAG【逻辑大师】**：结合知识图谱和向量检索优势，多方面增强 LLM 推理和生成性能，注重逻辑关系。
71. **FILCO【筛选师】**：基于多种方法识别过滤检索上下文，提升提供给生成器的上下文质量。
72. **LazyGraphRAG【精算师】**：延迟 LLM 使用降低索引成本，提高查询效率和答案质量，优化资源利用。


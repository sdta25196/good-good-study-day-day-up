## 目录结构


### 文件处理
- `data` E答没有回答上来的问题
- `readFile.py` 处理data文件，由vikingdb匹配答案。然后写入data1
- `data1` data中数据由vikingdb匹配答案后的数据
- `toExcel.py` 把data1中的数据，写入到excel

### 测试demo
- `demo-db.py` 处理新建数据集、新建索引
- `demo-main.py` 调用query进行检索测试
- `xxx.csv`  灌库的数据

### 启动服务

> 启动服务之后，不能开代理，否则会出现请求不通的问题

- `server.py`  fastapi服务
- `static/index.html`  服务默认的根目录index
- `getVector.py`   main.py 的复制版本，修改为配合server做索引


## 知识库

- faq文档的Excel命名必须带faq，例如`xxx.faq.xlsx`
- 文档需要先存到对象存储功能中，前还不支持知识库直接上传。4-16
- 目前知识库不支持混合检索。4-16

## SDK

安装依赖 ：`pip install --user volcengine `

[demo文档](https://bytedance.larkoffice.com/docx/AUlLdZPx7ofhpvxepcqca7sun8g)

**使用demo不能开代理，否则会出现ssl错误**


## QA

- 文档向量化的操作在哪搞？

可以直接使用pipeline, 如果不使用这个的话，才自己使用embedding

- 数据集参数的含义？

必须有id主键字段。

只支持单向量，不支持多个向量字段


- 一个数据集可以创建多个索引是为什么？

多个索引可以根据不同的检索策略来提前对数据集进行区分。

例如：不同的算法，不同的量化逻辑，不同的存储方式等。

- 索引参数的含义？  

[索引配置文档](https://www.volcengine.com/docs/6459/1171124)

选择不同的算法，来定义不同的策略。不同的算法影响到精度、时间等因素。

语义距离的算法也是根据不同的算来的

索引分片数调高的影响是：数据较多的时候可以并发地提高搜索效率，但同时也会增加分片的管理开销

量化：会损失检索精度，选择默认的float,全精度即可

子索引划分：数据集中使用标量字段划分成多个子数据集，不同的子数据集可以构建不同的子索引，比全量检索提升性能

标量过滤字段：指定要返回的标量字段列表

- 检索和索引的关系？

索引提前对数据集按照规则做了区分，定义了索引方式，节约检索时间。

检索控制检索的外部逻辑（检索个数、检索时的权重，是否过滤字段等）

- 检索参数的含义？

den_w： 索引中选择了混合之后，这里可以控制权重

稠密向量：接近特征  调低这个参数则更接近关键词检索
稀疏向量：接近关键词

out_f 标量过滤，标量是创建数据集的时候可以设置的字段。相当于给数据打标签了。

## TODO

- 看下用户指南
- 看下API参考

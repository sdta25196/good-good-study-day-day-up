## Agent

为什么用agent

* agent 可以一定程度上减少大模型的幻觉问题
* 处理实时信息
* 具备决策能力
* 有记忆、有计划、有工具、有行动能力

## 大模型生成可执行代码

1. 可以用大模型直接生成可运行代码，然后再运行这段代码。 生成代码需要注意把参数、路径、文件资料等信息全部给到大模型。

```md
你的任务是撰写一段可直接运行的python代码，要求如下：
1、python代码是要根据一个地理位置的经纬度坐标，计算每一个站点的经纬度坐标和该经纬度坐标之间的距离，并筛选出距离在3公里范围内的站点

2、中心位置的地理位置经纬度坐标为{{Latitude}}, {{Longitude}}

3、所有站点的信息都在excel文件"sites_geocoded.xlsx"内，访问链接为：https://p16-bot-sign-sg.ciciai.com/tos-alisg-i-b2l6bve69y-sg/88c0c5a75fcd467c8a80632d6c51644e.xlsx~tplv-b2l6bve69y-image.image?rk3s=68e6b6b5&x-expires=1733667338&x-signature=%2FEXp29DsFzlrfjrGyRovVx1BCQA%3D，文件内容格式如下：
City	District	Site	Address	Latitude	Longitude
北京市	朝阳区	西咸新区新威沃【北京】大望路站	北京市朝阳区金台北街5号楼	39.92236	116.472027
北京市	朝阳区	西咸新区新威沃【北京】欢乐谷站	北京市朝阳区翠城盛园144号楼	39.857302	116.509996
北京市	朝阳区	西咸新区新威沃【北京】双桥站	北京市朝阳区远洋一方6号院9号楼	39.902055	116.593381
北京市	朝阳区	西咸新区新威沃【北京】石佛营站	北京市朝阳区慈云寺北里105号楼	39.919081	116.495865
北京市	朝阳区	西咸新区新威沃【北京】国贸站	北京市朝阳区呼家楼街道新苑2号楼	40.003561	116.474288

4、文件路径为："/mnt/data/{{file_name}}"

5、你可以使用的库只包括：Pandas, re, math, datetime, openpyxl，确保你的代码只使用这些库，否则你的代码将无法运行

6、输出纯python代码，不要markdonw的任何格式，代码前后不要添加""```python"

7、只输出可执行的python代码，其他任何内容都不要输出
``

2. 运行生成的代码时，需要把相关资源准备好，放到对应的位置


## 利用知识库改变大模型的对话风格

知识库拆分成一问一答的形式，让大模型保持知识库答案的文风。这样答案部分的风格将会影响到大模型的对话风格。

配合上system prompt的使用，效果加倍。

## 解决用户一次问多个问题的场景

把知识库中多个匹配到的问题全部放到提示词中。让大模型润色回复

## 上下文的处理

不建议单独写提示词处理上下文，而是直接使用大模型的上下文理解能力。

不建议：
- 使用提示词处理上下文，得到真正意图随后去匹配工具。
> 会出现理解错误。同时耗时不稳定。

建议：
- 直接使用大模型的能力，同时告诉大模型有哪些工具可以用，让大模型直接返回使用工具。 
> 会出现工具还用错误的情况。好处是省去了提示词上下文所需要的时间消耗，坏处是tokens消耗较大

## 特定的节点使用工作流

工作流是可以编写成公共的，在特定的节点使用

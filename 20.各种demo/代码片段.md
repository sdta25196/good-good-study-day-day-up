# æºç å®ç°

## éªŒè¯æ˜¯å¦æ˜¯éè´Ÿæ•´æ•°

```js
  let n = 1
  if (n === n >>> 0) { }
```

## endwith 

@ignorecaseæ˜¯å¦å¿½ç•¥å¤§å°å†™

```js
  function endWith(target, str, ignorecase) {
    let endStr = target.substring(target.length - str.length)

    return ignorecase ? endStr.toLowerCase() === str.toLowerCase() : endStr === str
  }
```

## repeat é‡å¤å­—ç¬¦ä¸²
```js
  function repeat(target, n) {
    let s = target, total = ""
    while (n > 0) {
      if (n % 2 == 1) {
        total += s
      }
      if (n == 1) break;
      s += s
      n = n >> 1
    }
    return total
  }
```

## jså¤„ç†ä¸€ä¸ªå­—ç¬¦é•¿åº¦æ˜¯2çš„é—®é¢˜

è¿™ä¸ªåŸå› æ˜¯jsä½¿ç”¨ucs-2ç¼–ç æ–¹å¼ï¼Œåæ¥åˆå¹¶åˆ°äº†UTF-16ï¼Œä½†æ˜¯å†å²é—ç•™é—®é¢˜è¿˜åœ¨ï¼š

å› ä¸ºå½“æ—¶ï¼ˆ1995å¹´ï¼‰unicodeåªæœ‰ä¸€ä¸ªåŸºæœ¬å¹³é¢,ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚å°±è¶³å¤Ÿè¡¨ç¤ºå­—ç¬¦äº†ï¼Œé€ æˆæ‰€æœ‰å­—ç¬¦åœ¨jsä¸­éƒ½æ˜¯2ä¸ªå­—èŠ‚ï¼Œå¦‚æœæ˜¯4ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œä¼šå½“ä½œä¸¤ä¸ªåŒå­—èŠ‚çš„å­—ç¬¦å¤„ç†ã€‚åŒºåˆ†çš„åŠæ³•å°±æ˜¯
ç¬¬ä¸€ä¸ªå­—ç¬¦åœ¨0xd800-0xdbffä¹‹é—´

ä¾‹å¦‚ï¼š`'ğŒ†'.charCodeAt(0) // 55348 ï¼ˆ0xd834ï¼‰`

```js
  while (++index < length) {
    // å¦‚æœæœ‰ä¸€ä¸ªcharcodeatè½åœ¨äº† 0xd800å’Œ0xdbffä¹‹é—´ï¼Œå°±è¦è¿åŒä¸‹ä¸€ä¸ªå­—ç¬¦ä¸€èµ·ï¼Œæ‰ç®—æ˜¯ä¸€ä¸ªå­—
    if (charCode >= 0xD800 && charCode <= 0xDBFF) {
      output.push(character + string.charAt(++index));
    } else {
      output.push(character);
    }
  }
```
> es6ä¹‹åï¼Œå°±ä¸éœ€è¦è‡ªå·±å¤„ç†è¿™äº›äº†

**ä»¥ä¸‹ä¸¤ç§å¯ä»¥æ­£å¸¸è¡¨ç¤ºé•¿åº¦ä¸å­—ç¬¦**

```js
  Array.from('ğŒ†').length

  for (let s of 'ğŒ†') {
    console.log(s)
  }
```

### ç ç‚¹è¡¨ç¤ºæ³•

JavaScriptå…è®¸ç›´æ¥ç”¨ç ç‚¹è¡¨ç¤ºUnicodeå­—ç¬¦ï¼Œå†™æ³•æ˜¯"åæ–œæ +u+ç ç‚¹"ã€‚

`'å¥½' === '\u597D' // true`


ä½†æ˜¯ï¼Œè¿™ç§è¡¨ç¤ºæ³•å¯¹4å­—èŠ‚çš„ç ç‚¹æ— æ•ˆã€‚ES6ä¿®æ­£äº†è¿™ä¸ªé—®é¢˜ï¼Œåªè¦å°†ç ç‚¹æ”¾åœ¨å¤§æ‹¬å·å†…ï¼Œå°±èƒ½æ­£ç¡®è¯†åˆ«ã€‚ 4å­—èŠ‚å°±æ˜¯è½åœ¨äº†å…¶ä»–çš„å¹³é¢é‡Œ

```js
  'ğŒ†' ===  '\u1d306' // false
  
  'ğŒ†' ===  '\u{1d306}' // true

  "\uD834\uDF06" === '\u{1d306}' // true

  'ğŒ†'.codePointAt(0) // 119558  0x1d306

```


## ç§»é™¤html

```js
  function stripHtml(target) {
    let rtag = /<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi

    return String(target || "").replace(rtag, "")
  }
```

## è®¡ç®—hash
```js
const crypto = require("crypto")
const hash = crypto.createHash("sha1").update(content).digest('hex')
```

## æ‰€æœ‰ç©ºæ ¼

whitespaceå¯ä»¥åŒ¹é…æ‰€æœ‰jsä¸­çš„ç©ºæ ¼

```js
  let whitespace = ' \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\n\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000'
```

## åˆ©ç”¨ç©ºç™½ç¬¦ä½œä¸ºæŒ‡çº¹

a-zåˆ†åˆ«ç”¨1-24ä¸ª\u200bä»£æ›¿ï¼Œé—´éš”ç¬¦ç”¨\u2029ä»£æ›¿ã€‚ æŠŠsecretæ‹¼æ¥åˆ°ä»»æ„å­—ç¬¦ä¸²å‰ï¼Œä½œä¸ºæŒ‡çº¹ã€‚å¹¶ä¸ä¼šå½±å“åˆ°é¡µé¢çš„å±•ç°æ•ˆæœã€‚
```js
secret='\u200b\u200b\u200b\u200b\u200b\u200b\u200b\u200b\u200b\u200b\u2029\u200b\u200b\u200b\u200b\u200b\u200b\u200b\u200b\u200b\u200b'

[...secret].forEach((item,i)=>{
    console.log(item.charCodeAt(0).toString(16)) // è¾“å‡ºå¯¹åº”çš„unicode
})
```

## æŸ¥æ‰¾é‡å¤å­—ç¬¦ä¸²

```js
let str = 'hello grey in my home go for it  that is right  when i say the girl  i fall in love with her'
let c = new Set()

str.match(/\w+/g).forEach(item => str.match(new RegExp(`\\b${item}\\b`, 'g')).length > 1 ? c.add(item) : "")

console.log(c) //=> {in, i}
```

## æµè§ˆå™¨å†™æ–‡ä»¶

```js
var textFileAsBlob = new Blob(['hello word'], {type:'text/plain'});
var downloadLink = document.createElement("a");
downloadLink.download = 'test.txt';
downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
downloadLink.click();
```

## ä¸‹è½½é¡µé¢ä¸Šæ‰€æœ‰çš„å›¾ç‰‡

```js
$$('img').forEach(async (img) => {
 try {
   const src = img.src;
   // Fetch the image as a blob.
   const fetchResponse = await fetch(src);
   const blob = await fetchResponse.blob();
   const mimeType = blob.type;
   // Figure out a name for it from the src and the mime-type.
   const start = src.lastIndexOf('/') + 1;
   const end = src.indexOf('.', start);
   let name = src.substring(start, end === -1 ? undefined : end);
   name = name.replace(/[^a-zA-Z0-9]+/g, '-');
   name += '.' + mimeType.substring(mimeType.lastIndexOf('/') + 1);
   // Download the blob using a <a> element.
   const a = document.createElement('a');
   a.setAttribute('href', URL.createObjectURL(blob));
   a.setAttribute('download', name);
   a.click();
 } catch (e) {}
});
```